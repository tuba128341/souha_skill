<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>武将検索</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="password-protect">
        <h3>スキル検索結果を閲覧するにはパスワードが必要です。</h3>
        <input type="password" id="password-input" placeholder="パスワードを入力">
        <button id="password-submit">送信</button>
        <p id="password-error" style="color: red; display: none;">パスワードが間違っています。</p>
    </div>
    
    <!-- メニューアイコン -->
    <div id="menu-toggle" class="menu-toggle">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
    </div>

    <!-- メニューのコンテンツ（隠れるようにしておく）-->
    <div id="menu" class="menu">
        <ul>
            <li><a href="index.html" id="home">ホーム</a></li>
            <li><a href="#">武将一覧</a></li>
            <li><a href="#" id="toggleDarkMode">ダークモード</a></li>
        </ul>
    </div>
    
    <div id="search-results" style="display: none;">
        <div class="container">
             <h1>武将検索</h1>
            <form id="searchForm">
                <input type="text" id="searchInput" placeholder="武将名またはスキル名、スキル内容で検索">
                <select id="countrySelect">
                    <option value="">全ての国</option>
                    <option value="秦">秦</option>
                    <option value="趙">趙</option>
                    <option value="魏">魏</option>
                    <option value="楚">楚</option>
                    <option value="韓">韓</option>
                    <option value="斉">斉</option>
                    <option value="燕">燕</option>
                    <option value="山の民">山の民</option>
                    <option value="毐">毐</option>
                </select>
                <button type="submit">検索</button>
            </form>

            <div class="search-summary">
                <p id="searchConditions"></p>
                <button id="resetFilters" class="hidden">フィルタを解除</button>
            </div>

            <div id="results" class="results">
                <!-- 検索結果がここに表示される -->
            </div>
        </div>
    </div>

    <script>
        //パスワード処理
        const correctPassword = "1111"; // 正しいパスワード
        const passwordInput = document.getElementById("password-input");
        const passwordSubmit = document.getElementById("password-submit");
        const passwordError = document.getElementById("password-error");
        const passwordProtect = document.getElementById("password-protect");
        const searchResults = document.getElementById("search-results");

        passwordSubmit.addEventListener("click", () => {
            const enteredPassword = passwordInput.value;

            if (enteredPassword === correctPassword) {
                // パスワードが正しい場合
                passwordProtect.style.display = "none"; // パスワードフォームを非表示
                searchResults.style.display = "block"; // 検索結果を表示
            } else {
                // パスワードが間違っている場合
                passwordError.style.display = "block"; // エラーメッセージを表示
            }
        });

        // ダークモード切り替えの処理
        const toggleDarkModeButton = document.getElementById('toggleDarkMode');

        toggleDarkModeButton.addEventListener('click', function() {
            document.body.classList.toggle('dark-mode'); // dark-modeクラスを切り替え
        });

        // メニューの開閉を制御する
        const menuToggle = document.getElementById('menu-toggle');
        const menu = document.getElementById('menu');

        // メニューアイコンクリック時にメニューの表示を切り替える
        menuToggle.addEventListener('click', function () {
            menu.classList.toggle('open'); // "open" クラスの切り替え
            menuToggle.classList.toggle('open'); // アイコンにも "open" クラスを追加してスタイル変更
        });

        // ホームリンクの処理
        document.getElementById('home').addEventListener('click', function() {
            window.scrollTo(0, 0); // ページトップに戻る
        });

        // 検索条件の表示エリアとフィルタ解除ボタン
        const searchConditions = document.getElementById('searchConditions');
        const resetFiltersButton = document.getElementById('resetFilters');

        // 初期状態で「検索条件が設定されていません。」を表示
        searchConditions.textContent = "検索条件が設定されていません。";

        // 検索フォームの要素を取得
        const searchForm = document.getElementById('searchForm');
        const searchInput = document.getElementById('searchInput');
        const countrySelect = document.getElementById('countrySelect');
        const resultsDiv = document.getElementById('results');

        // 武将データ
        const data = [
            //秦国
            //あ
            {
                name: "王騎",
                reading: "おうき",
                skills: [
                    "剛気一閃・攻撃力強化【騎兵】〈戦技〉: 最大士気が最も高い敵武将1名に150%のダメージを与える。 攻撃後、3ターンの間、味方騎兵武将の攻撃力が20%上昇する。",
                    "王騎軍の威光〈軍略〉: 味方騎兵武将の敵弓兵武将に対する攻撃力が15%上昇する。さらに、味方王騎軍武将の攻撃力が15%上昇する。",
                    "怪鳥と戦神の鉄の忠義〈戦技〉: 最大士気が最も高い敵武将1名に120%のダメージを与える。 攻撃後、3ターンの間、自身と味方六大将軍と味方「昭王」の防御力が10%上昇する。さらに、自身の残り体力が50%以下の場合、3ターンの間、自身と味方秦国武将の攻撃力が20%上昇する。"
                ],
                country: "秦"
            },
            {
                name: "王齕",
                reading: "おうこつ",
                skills: [
                    "剛堅一閃・攻撃力強化【歩兵】〈戦技〉: 防御力が最も高い敵兵器2つに100%のダメージを与える。 攻撃後、3ターンの間、味方歩兵武将の攻撃力が20%上昇する。",
                    "怪力無双〈軍略〉: 味方「昭王」と味方六大将軍武将1名につき自身の攻撃力と防御力が5%上昇する。",
                    "破壊の象徴〈軍略〉: 味方攻撃兵器の攻撃力が15%上昇する。 さらに、味方秦国武将1名につき味方攻撃兵器の攻撃力が5%上昇する。"
                ],
                country: "秦"
            },
            {
                name: "王翦",
                reading: "おうせん",
                skills: [
                    "猛将一閃【赤虎】〈戦技〉: 攻撃力が最も高い敵武将1名に150%のダメージを与える。敵騎兵武将の攻撃力を20%低下(3ターン)させる。駐屯時には、自身の防御力が20%上昇(3ターン)する。",
                    "深謀の用兵術〈戦技〉: 自身と味方盾兵武将の攻撃力が20%上昇(3ターン)する。駐屯時には、味方盾兵武将に「挑発」状態(3ターン)と60%のガード効果(2回)を付与する。攻撃力が最も高い敵武将1名に170%のダメージを与える。",
                    "必勝の籠城〈軍略〉: 敵騎兵武将のクリティカル発生率を20%低下させる。駐屯時には、自身と味方盾兵武将の防御力貫通が30%上昇し、城門の体力が残存時、城門の体力を50000回復する。"
                ],
                country: "秦"
            },
            //か
            {
                name: "岳雷",
                reading: "がくらい",
                skills: [
                    "防御強化【橙牛】〈軍略〉: 味方秦国武将の防御力が20%上昇する。侵攻時には、味方「麃公」、飛信隊武将の「裏切り」状態になる確率が20%低下する。",
                    "後手必勝〈戦技〉: 自身の残り体力が90%未満の場合、味方秦国武将のクリティカルダメージが20%上昇（3ターン）する。味方「麃公」・飛信隊武将の体力と土気を20%回復する。最大士気が最も高い敵武将1名に80%のダメージを3回与える。",
                    "乱戦強者〈戦技〉: 味方秦国武将のクリティカル発生率が10%上昇（3ターン）する。味方「麃公」、飛信隊武将のクリティカル発生率が20%上昇（3ターン）する。最大士気が最も高い敵武将1名に80%のダメージを4回与える。"
                ],
                country: "秦"
            },
            {
                name: "我呂",
                reading: "がろ",
                skills: [
                    "攻撃強化【橙象】〈軍略〉: 自身以外の味方歩兵武将と騎兵武将の攻撃力が20%上昇する。",
                    "先手必勝〈戦技〉: 最大士気が最も高い敵武将1名に150%のダメージを与える。自身以外の味方歩兵武将と騎兵武将に攻撃無効（1回）を付与する。",
                    "戦乱巧者〈戦技〉: 残り体力が最も低い敵武将1名に170%のダメージを与える。自身以外の味方騎兵武将が生存している場合、味方全武将の攻撃力が10%上昇（4ターン）する。味方歩兵武将が生存している場合、味方全武将の防御力が10%上昇（4ターン）する。味方秦国武将に攻撃無効（1回）を付与する。"
                ],
                country: "秦"
            },
            {
                name: "桓騎",
                reading: "かんき",
                skills: [
                    "重追擊【赤象】〈戦技〉: 残り体力が最も低い敵武将1名に150%のダメージを与える。自身が敵武将から狙われにくくなる（3ターン）。駐屯時には、50%の確率で体力上限が最も高い敵武将3名に「火傷」状態（4ターン）を付与する。",
                    "狂気の所業〈戦技〉: 敵弓兵武将の士気を20%低下させ、50%の確率で敵弓兵武将に「恐怖」状態（4ターン）を付与する。100%の確率で敵趙国、魏国武将に「恐怖」状態（4ターン）を付与する。残り体力が最も低い敵武将1名に170%のダメージを与え、攻撃力が最も高い敵兵器1つに180%のダメージを与える。",
                    "野盗の十八番〈軍略〉: 味方秦国武将の「火傷」状態の武将に対する攻撃力が20%上昇する。味方秦国武将の「恐怖」状態の武将に対する攻撃力が20%上昇する。味方桓騎軍武将の回避率が40%上昇する。駐屯時には、味方盾兵武将のクリティカル発生率が20%上昇する。"
                ],
                country: "秦"
            },
            {
                name: "摎",
                reading: "きょう",
                skills: [
                    "剛気一閃・捨て身〈戦技〉: 最大士気が最も高い敵武将1名に150%のダメージを与える。 攻撃後、3ターンの間、自身が「捨て身」状態になる。",
                    "幼き約束〈軍略〉: 自身の敵弓兵武将に対する攻撃力が15%上昇する。さらに、 味方武将に「王騎」がいる場合、自身の攻撃力が15%上昇する。",
                    "戦神の血統〈戦技〉: 最大士気が最も高い敵武将1名に120%のダメージを与える。 侵攻時にはダメージが150%に上昇し、さらに、自身の残りHP50%以下の場合には180%に上昇する。"
                ],
                country: "秦"
            },
            {
                name: "羌瘣",
                reading: "きょうかい",
                skills: [
                    "猛将一閃【青羊】〈戦技〉: 攻撃力が最も高い敵武将1名に150%のダメージを与える。自身以外の味方歩兵武将1名につき、自身の攻撃力が10%上昇（3ターン）する。",
                    "帰る場所〈戦技〉: 味方飛信隊武将が生存している場合、自身の体力を30%回復する。味方「信」が生存している場合、自身の防御力貫通が20%上昇（3ターン）する。攻撃力が最も高い敵武将1名に160%のダメージを与える。",
                    "巫舞〈戦技〉: 自身が「見切り（60%）」状態（2ターン）になる。自身の攻撃力が40%上昇（2ターン）する。攻撃力が最も低い敵武将3名に80%のダメージを与える。自身の攻撃カと防御力と回避率を30%低下（3ターン）させる。"
                ],
                country: "秦"
            },
            {
                name: "羌象",
                reading: "きょうしょう",
                skills: [
                    "猛将一閃【緑虎】〈戦技〉: 攻撃力が最も高い敵武将1名に150%のダメージを与える。自身の残り体力が高いほど味方歩兵武将の攻撃力が上昇（3ターン）する（最大30%）",
                    "水路適性・大〈内政〉: 地形【水路】の被ダメージ上昇効果への耐性が7.2%上昇する。自身が出撃していなくても有効。",
                    "体力強化・大改【歩兵】〈内政〉: 同盟争覇戦時に味方歩兵武将の体力上限を18.2%上昇する。自身が出撃していなくても有効。"
                ],
                country: "秦"
            },
            //さ
            {
                name: "信",
                reading: "しん",
                skills: [
                    "猛将一閃【黄亀】〈戦技〉: 攻撃力が最も高い敵武将1名に150%のダメージを与える。侵攻時には、味方全武将の攻撃力が10%上昇（3ターン）する。",
                    "飛信隊の剣〈軍略〉: 自身以外の味方秦国武将1名につき、味方秦国武将の攻撃力が5%上昇する。自身以外の味方飛信隊武将1名につき、味方飛信隊武将の攻撃力が5%上昇する。",
                    "受け継ぐ意思〈戦技〉: 攻撃力が最も高い敵武将1名に160%のダメージを与える。自身以外の味方武将の攻撃回数1回につき、味方歩兵武将と騎兵武将の攻撃力が3%上昇（3ターン）する（最大25%）。"
                ],
                country: "秦"
            },
            {
                name: "ゼノウ",
                reading: "ぜのう",
                skills: [
                    "猛将擊滅【赤羊】〈戦技〉: 自身に暴走状態（3ターン）を付与する。攻撃力が最も高い敵武将1名に200%のダメージを与える。",
                    "鏖殺〈戦技〉: 自身に暴走状態（3ターン）を付与する。敵趙国、魏国武将の土気を40%低下させる。攻選力が最も高い敵武将1名に240%のダメージを与える。",
                    "野盗の最終兵器〈軍略〉: 自身の防御力貫通が30%上昇する。味方「桓騎」が生存している場合、自身への挑発を除いた状態異常（デバフ）を無効化（6回）する。"
                ],
                country: "秦"
            },
            //た
            {
                name: "張唐",
                reading: "ちょうとう",
                skills: [
                    "猛将一閃【紫牛】〈戦技〉: 攻撃力が最も高い敵武将1名に150%のダメージを与える。自身が「挑発」状態(3ターン)になる。駐屯時には、自身の防御力が20%上昇(3ターン)する。",
                    "武将の力〈戦技〉: 攻撃力が最も高い敵武将1名に170%のダメージを与える。味方秦国武将1名につき、自身の防御力が10%上昇(4ターン)する。駐屯時には、自身に10%の体力継続回復(3ターン)を付与する。",
                    "老将の底力〈軍略〉: 自身への挑発を除いた状態異常(デバフ)を無効化(3回)する。駐屯時には、自身に60%のガード効果(3回)を付与し、城門の体力残存時、城門の体力を20000回復する。"
                ],
                country: "秦"
            },
            //な
            {
                name: "那貴",
                reading: "なき",
                skills: [
                    "名将一閃【黄羊】〈戦技〉: 最大士気が最も高い敵武将1名に150%のダメージを与える。味方秦国武将の防御力が20%上昇（3ターン）する。",
                    "機先を制する〈軍略〉: 自身が「必中」状態になる。味方桓騎軍武将の防御力貫通が20%上昇する。侵攻時には、味方桓騎軍武将が「見切り（20%）」状態になる。",
                    "静かなる制圧〈戦技〉: 70%の確率で敵趙国、魏国武将に「体力回復無効」状態（4ターン）を付与する。侵攻時には、味方桓騎軍武将のクリティカル発生率が20%上昇（3ターン）する。最大士気が最も高い敵武将1名に180%のダメージを与える。"
                ],
                country: "秦"
            },
            //ら
            {
                name: "雷土",
                reading: "らいど",
                skills: [
                    "猛将一閃【黒牛】〈戦技〉: 攻撃力が最も高い敵武将1名に150%のダメージを与える。自身の残り体力が70%以下の場合、40%の確率で敵全武将に「幻影」状態(3ターン)を付与する。",
                    "攻撃力強化・中【盾兵】〈内政〉: 同盟争覇戦時に味方盾兵武将の攻撃力を3.8%上昇する。自身が出撃していなくても有効。",
                    "宵の篝火〈戦技〉: 40%の確率で敵全武将に「火傷」状態(4ターン)を付与する。攻撃力が最も高い敵武将1名に180%のダメージを与える。自身が「挑発」状態(4ターン)になる。自身の防御力が30%上昇(4ターン)する。",
                    "野盗の腹心☆6【追想】〈軍略〉: 自身の体力上限が100%上昇する。自身の攻撃力と防御力が30%上昇する。侵攻時には、味方桓騎軍武将の命中率が25%上昇する。自身に100%のガード効果(2回)を付与する。"
                ],
                country: "秦"
            },
            //趙国
            //か
            {
                name: "慶舎",
                reading: "けいしゃ",
                skills: [
                    "重追撃【緑羊】〈戦技〉: 残り体力が最も低い敵武将1名に150%のダメージを与える。敵騎兵武将の攻撃力を20%低下(3ターン)させる。駐屯時には、70%の確率で攻撃力が最も高い敵武将1名に「錯乱」状態(3ターン)を付与する。",
                    "狩人の本領〈軍略〉: 自身と味方弓兵武将の防御力貫通が20%上昇する。自身と味方趙国武将のクリティカルダメージが20%上昇する。駐屯時には、自身が敵武将から狙われにくくなる。",
                    "狩り取る糸〈戦技〉: 防御力が最も高い敵盾兵武将1名に「挑発」状態(4ターン)を付与する。防御力が最も高い敵武将1名に180%のダメージを与える。駐屯時には、自身と味方弓兵武将に攻撃無効(1回)を付与し、城門の体力が残存時、城門の体力を100000回復する。",
                    "狩人の嗅覚☆6【追想】〈軍略〉: 自身の体力上限が100%上昇する。味方弓兵武将のクリティカル発生率が25%上昇する。味方弓兵武将の「錯乱」状態の付与確率が30%上昇する。敵盾兵武将が生存している場合、味方弓兵武将に60%のガード効果(3回)を付与する。"
                ],
                country: "趙"
            },
            //さ
            {
                name: "晋成常",
                reading: "しんせいじょう",
                skills: [
                    "猛将一閃【紫象】〈戦技〉: 攻撃力が最も高い敵武将1名に150%のダメージを与える。自身以外の味方騎兵武将の防御力が20%上昇(3ターン)する。侵攻時には、自身以外の味方騎兵武将nお攻撃力が20%上昇(3ターン)する",
                    "熟練の支援〈軍略〉: 味方趙国武将の防御力貫通が20%上昇する。",
                    "老将の献身〈戦技〉: 自身の残り体力が90%以上の場合、攻撃力が最も高い敵武将1名に160%のダメージを与え、味方趙国武将に60%のガード効果(1回)を付与する。自身の残り体力が90%未満の場合、攻撃力が最も高い敵武将1名に100%のダメージを与え、自身の体力を50%回復する。自身以外の味方趙国武将が残り体力90%未満で生存している場合、生存している自身以外の味方趙国武将の体力を30%回復する。",
                    "殿の意地☆6【追想】〈軍略〉: 味方趙国武将の防御力が20%上昇する。味方趙国武将の秦国武将に対する防御力が30%上昇する。敵秦国武将か山の民武将が生存している場合、自身の体力を20%回復する。"
                ],
                country: "趙"
            },
            //は
            {
                name: "傅抵",
                reading: "ふてい",
                skills: [
                    "猛将一閃【黒虎】〈戦技〉: 攻撃力が最も高い敵武将1名に150%のダメージを与える。自身以外の味方騎兵武将の防御力が20%上昇(3ターン)する。",
                    "神速の白兵戦〈軍略〉: 敵歩兵武将と騎兵武将の回避率を10%低下させる。味方「カイネ」が生存している場合、自身の歩兵武将と騎兵武将に対する攻撃力が20%上昇する。",
                    "翻弄する韋駄天〈戦技〉: ランダムな敵武将2名に100%のダメージを与える。自身の回避率が50%上昇(3ターン)する。駐屯時には、自身が「挑発」状態(3ターン)になる。",
                    "閃光☆6【追想】〈軍略〉: 自身の体力上限が100%上昇する。自身の攻撃力と防御力が30%上昇する。敵歩兵武将と騎兵武将の回避率を25%低下させる。自身が「見切り(25%)」状態になる。"
                ],
                country: "趙"
            },
            {
                name: "龐煖",
                reading: "ほうけん",
                skills: [
                    "猛将一閃【青亀】〈戦技〉: 攻撃力が最も高い敵武将1名に150%のダメージを与える。自身の残り体力が70%以上の場合、自身の攻撃力と防御力が30%上昇(3ターン)する。",
                    "武の化身〈軍略〉: 自身の秦国武将に対する攻撃力が20%上昇する。自身の弓兵武将に対する防御力が40%上昇する。自身が「見切り(20%)」状態になる。",
                    "絶望の一撃〈戦技〉: 自身の六大将軍武将に対する攻撃力が40%上昇(3ターン)する。敵全武将に90%のダメージを与える。自身の残り体力が100%未満の場合、自身の体力を40%回復する。",
                    "求道の果て☆6【追想】〈軍略〉: 自身の攻撃力、クリティカル発生率、防御力貫通が30%上昇する。自身の命中率と回避率が20%上昇する。"
                ],
                country: "趙"
            },
            //ま
            {
                name: "万極",
                reading: "まんごく",
                skills: [
                    "重追撃【橙牛】〈戦技〉: 残り体力が最も低い敵武将1名に150%のダメージを与える。自身の残り体力が低いほど自身の攻撃力が上昇(3ターン)する(最大50%)。",
                    "体力強化・大【攻撃兵器】〈内政〉: 同盟争覇戦時に味方攻撃兵器の体力上限を12.3%上昇する。自身が出撃していなくても有効。",
                    "泥濘適性・大改〈内政〉: 地形【泥濘】の被ダメージ上昇効果への耐性が16.6%上昇する。自身が出撃していなくても有効。",
                    "怨讐☆6【追想】〈軍略〉: 自身の体力上限が100%上昇する。自身の攻撃力と防御力が30%上昇する。敵に秦国武将がいる場合、味方趙国武将の「恐怖」状態になる確率が100%低下し、敵全武将の防御力と回避率を30%低下させ、自身の攻撃力が40%上昇する。"
                ],
                country: "趙"
            },
            //ら
            {
                name: "李牧",
                reading: "りぼく",
                skills: [
                    "猛将一閃【緑亀】〈戦技〉: 攻撃力が最も高い敵武将1名に150%のダメージを与える。味方騎兵武将1名につき、自身の防御力が10%上昇(3ターン)する。侵攻時には、自身の攻撃力が20%上昇(3ターン)する。",
                    "参謀の手腕〈軍略〉: 自身以外の味方趙国、魏国、楚国、韓国、燕国武将の防御力が20%上昇する。生存している自身以外の味方趙国、魏国、楚国、韓国、燕国武将の体力を10%回復する。",
                    "守戦の名将〈戦技〉: 攻撃力が最も高い敵武将1名に150%のダメージを与える。味方「龐煖」に攻撃無効(1回)を付与する。自身以外の味方趙国、魏国、楚国、韓国、燕国武将の士気を10%回復する。駐屯時には、残り体力が最も高い敵武将1名に残り体力の20%のダメージを与え、その100%を自身の体力に吸収し、残り体力が最も低い敵兵器1つに180%のダメージを与える。"
                ],
                country: "趙"
            },
            //魏国
            //か
            {
                name: "凱孟",
                reading: "がいもう",
                skills: [
                    "鉄壁一閃【黄亀】〈戦技〉: 自身の防御力貫通が10%上昇(3ターン)する。防御力が最も高い敵武将1名に150%のダメージを与える。",
                    "戦への渇望〈戦技〉: 味方魏火龍武将の防御力貫通が15%上昇(3ターン)する。攻撃力が最も高い敵武将1名に160%のダメージを与える。",
                    "殺戮の一撃〈戦技〉: 味方魏国武将の防御力貫通が20%上昇(3ターン)する。最大士気が最も高い敵武将1名に170%のダメージを与える。自身に60%のガード効果(3回)を付与する。"
                ],
                country: "魏"
            },
            {
                name: "呉鳳明",
                reading: "ごほうめい",
                skills: [
                    "剛堅一閃・攻撃力低下〈戦技〉: 防御力が最も高い敵武将1名に150%のダメージを与える。 攻撃後、3ターンの間、防御力が最も高い敵武将1名の攻撃力を20%低下させる。",
                    "兵器開発の才〈軍略〉: 味方弓兵武将と歩兵武将1名につき、自身と味方攻撃兵器の攻撃力が10%上昇する。",
                    "次代の軍略〈戦技〉: 防御力の最も高い敵武将1名に150%のダメージを与える。 さらに侵攻時には、3ターンの間、味方盾兵武将の防御力が15%上昇し、味方弓兵武将の敵盾兵武将に対する攻撃力が20%上昇する。"
                ],
                country: "魏"
            },
            //さ
            {
                name: "紫季歌",
                reading: "しきか",
                skills: [
                    "急所一閃【橙牛】〈戦技〉: 防御力が最も低い敵武将1名に150%のダメージを与える。自身が敵武将から狙われにくくなる(3ターン)。味方「紫伯」が「見切り(40%)」状態(4ターン)になる。自身の残り体力が50%未満の場合、味方「紫伯」が「暴走」状態(3ターン)になる。自身の残り体力が100%未満の場合、自身の体力を50%回復する。",
                    "大梁の美姫〈軍略〉: 自身以外の味方魏国武将の攻撃力が15%上昇する。味方騎兵武将の防御力が15%上昇する。味方魏火龍武将の士気消費を50%軽減する。「紫伯」が「紫季歌」に与えるダメージを大幅に低下させる。",
                    "体力強化・特大改【歩兵】〈内政〉: 同盟争覇戦時に味方歩兵武将の体力上限を22.8%上昇する。自身が出撃していなくても有効。"
                ],
                country: "魏"
            },
            {
                name: "紫伯",
                reading: "しはく",
                skills: [
                    "名将攻撃【赤羊】〈戦技〉: 自身の攻撃回数1回につき、自身の攻撃力が5%上昇(4ターン)する(最大50%)。最大士気が最も高い敵武将1名に100%のダメージを2回与える。",
                    "存在意義〈軍略〉: 自身の体力上限が150%上昇する。味方「紫季歌」が生存している場合、追加で体力上限が50%上昇する。自身以外の味方魏火龍武将1名につき、自身の攻撃力が10%上昇する。",
                    "色無き世界〈戦技〉: 自身が「捨て身」状態(4ターン)になる。最大士気が最も高い敵武将1名に100%のダメージを2回与える。"
                ],
                country: "魏"
            },
            {
                name: "荀早",
                reading: "じゅんそう",
                skills: [
                    "猛将一閃【白象】〈戦技〉: 攻撃力が最も高い敵武将1名に150%のダメージを与える。生存している味方騎兵武将の体力を20%回復する。",
                    "猛牛輔翼〈戦技〉: 最大士気が最も高い敵武将1名に170%のダメージを与える。敵騎兵武将の攻撃力を10%低下(3ターン)させる。駐屯時には、防御力が最も低い敵兵器1つに120%のダメージを与える。",
                    "泰然自若〈軍略〉: 自身の回避率が10%上昇する。自身以外の味方魏国武将の回避率が10%上昇する。味方「凱孟」の回避率が10%上昇する。"
                ],
                country: "魏"
            },
            //た
            {
                name: "太呂慈",
                reading: "たいろじ",
                skills: [
                    "猛将一戦【黒象】〈戦技〉: 侵攻時には、攻撃力が最も高い敵武将1名に150%のダメージを与える。駐屯時には、残り体力が最も高い敵武将1名に残り体力の20%のダメージを与え、その100%を自身の体力に吸収する。味方魏国武将の士気を5%回復する。",
                    "魏国大将軍〈軍略〉: 侵攻時には、味方魏国武将への挑発を除いた状態異常(デバフ)を無効化(2回)し、クリティカル発生率が20%上昇する。駐屯時には、味方魏国武将に60%のガード効果(1回)を付与し、敵全武将のクリティカル発生率を20%低下させる。",
                    "断罪の一撃〈戦技〉: 侵攻時には、味方魏国武将の攻撃力が20%上昇(4ターン)し、攻撃力が最も高い敵武将1名に180%のダメージを与える。駐屯時には、自身が「挑発」状態(2ターン)になり、自身の防御力が30%上昇(4ターン)し、敵全武将に100%のダメージを与える。味方魏国武将に8%の体力継続回復(4ターン)を付与する。"
                ],
                country: "魏"
            },
            //ら
            {
                name: "乱美迫",
                reading: "らんびはく",
                skills: [
                    "猛将一閃【白羊】〈戦技〉: 自身の残り体力が50%以上の場合、攻撃力が最も高い敵武将1名に160%のダメージを与える。自身の残り体力が50%未満の場合、攻撃力が最も高い敵武将1名に100%のダメージを与え、自身の体力を30%回復する。駐屯時には、残り体力が最も低い敵兵器1つに130%のダメージを与える。",
                    "破壊衝動〈軍略〉: 自身の秦国武将に対する攻撃力が30%上昇する。味方「霊凰」が生存している場合、自身の兵器に対する攻撃力が30%上昇する。",
                    "単騎特攻〈戦技〉: 自身の残り体力が90%以上の場合、攻撃力が最も高い敵武将1名に170%のダメージを与える。自身の残り体力が90%未満の場合、攻撃力が最も高い敵武将1名に100%のダメージを与え、自身の体力を50%回復する。自身が「挑発」状態(3ターン)になる。駐屯時には、攻撃力が最も高い敵歩兵武将1名と敵兵器1つに130%のダメージを与える。"
                ],
                country: "魏"
            },
            {
                name: "霊凰",
                reading: "れいおう",
                skills: [
                    "鉄壁一閃【黄虎】〈戦技〉: 自身の残り体力が90%以上の場合、防御力が最も高い敵武将1名に150%のダメージを与え、敵騎兵武将の攻撃力を10%低下(3ターン)させる。自身の残り体力が90%未満の場合、防御力が最も高い敵武将1名に160%のダメージを与え、その60%を自身の体力に吸収する。",
                    "魏火龍軍師〈軍略〉: 自身以外の味方魏国武将の攻撃力と防御力が10%上昇する。自身以外の味方魏火龍武将の攻撃力が20%上昇する。",
                    "戦況判断〈戦技〉: 自身の残り体力が90%以上の場合、防御力が最も高い敵武将1名に170%のダメージを与え、敵秦国武将と敵兵器の攻撃力を20%低下(3ターン)させる。自身の残り体力が90%未満の場合、敵全武将に70%のダメージを与え、その60%を自身の体力に吸収し、味方魏国武将に60%のガード効果(2回)を付与する。"
                ],
                country: "魏"
            },
            //楚国
            //は
            {
                name: "白麗",
                reading: "はくれい",
                skills: [
                    "重追撃【緑象】〈戰技〉: 残り体力が最も低い敵武将1名に150%のダメージを与える。70%の確率で攻撃力が最も高い敵武将1名に「錯乱」状態（3ターン）を付与する。",
                    "正射必中〈軍略〉: 味方弓兵武将が「必中」状態になる。敵全武将の弓兵武将に対する防御力を20%低下させる。",
                    "貫く剛弓〈戰技〉: 残り体力が最も低い敵武将1名に150%のダメージを与える。防御力が最も高い敵盾兵武将1名に200%のダメージを与える。敵騎兵武将の攻撃力を20%低下（3ターン）させる。"
                ],
                country: "楚"
            },
            //斉国
            //あ
            {
                name: "王建王",
                reading: "おうけんおう",
                skills: [
                    "鉄壁一閃【橙亀】〈戦技〉: 防御力が最も高い敵武将1名に150%のダメージを与える。自身が敵武将から狙われにくくなる（3ターン）。自身の残り体力が高いほど味方騎兵武将の攻撃力が上昇（3ターン）する（最大30%）。",
                    "商談成立〈軍略〉: 敵趙国、魏国、楚国、韓国、燕国武将の回避率を20%低下させる。味方秦国武将と斉国武将の回避率が40%上昇する。侵攻時には、味方秦国武将と斉国武将の士気消費を20%軽減する。",
                    "体力強化・特大改【盾兵】〈内政〉: 同盟争覇戦時に味方盾兵武将の体力上限を22.8%上昇する。自身が出撃していなくても有効。"
                ],
                country: "斉"
            },
            //山の民
            {
                name: "バジオウ",
                reading: "ばじおう",
                skills: [
                    "剛堅一閃・攻撃力強化【山の民】〈戦技〉: 防御力が最も高い敵武将1名に150%のダメージを与える。 攻撃後、3ターンの間、味方山の民武将の攻撃力が20%上昇する。",
                    "獣の心〈戦技〉: 3ターンの間、自身の敵弓兵武将に対する攻撃力が15%上昇する。さらに自身の残り体力が多いほど自身の攻撃力が上昇する。(最大20%)その後、最大士気が最も高い敵武将1名に120%のダメージを与える。",
                    "山界の咆哮〈軍略〉: 最も攻撃力の高い味方攻城兵器1つの攻撃力が20%上昇する。 さらに、味方山の民武将1名につき、最も攻撃力の高い味方攻城兵器1つの攻撃力が5%上昇する。"
                ],
                country: "山の民"
            }
        ];

        // 結果を表示する関数
        function displayResults(filteredData, query, country) {
            resultsDiv.innerHTML = ""; // 結果をリセット
            searchConditions.innerHTML = ""; //検索条件をリセット

            if (filteredData.length === 0) {
                resultsDiv.innerHTML = "<p>該当する武将が見つかりません。</p>";
            }
            
            // 検索条件を作成
            let conditionsText = "現在の検索条件: ";
            if (query) {
                conditionsText += `武将名またはスキル名/内容「${query}」 `;
            }
            if (country) {
                conditionsText += `国「${country}」`;
            }

            // 条件がない場合
            if (!query && !country) {
                conditionsText = "検索条件が設定されていません。";
            }

            // 検索条件を表示
            searchConditions.textContent = conditionsText;

            // 条件があればリセットボタンを表示
            if (query || country) {
                resetFiltersButton.classList.remove('hidden');
            } else {
                resetFiltersButton.classList.add('hidden');
            }

            //結果表示
            filteredData.forEach(item => {
                const resultItem = document.createElement('div');
                resultItem.classList.add('result-card');

                // フィルタリングされたスキル（インデックス保持）
                let filteredSkills = [];
                
                // 武将名が一致する場合、すべてのスキルを表示
                if (query !== "" && (item.name.includes(query) || item.reading.includes(query))) {
                    filteredSkills = item.skills.map((skill, index) => ({ skill, index }));
                } else if (query !== "") {
                    // スキル内容での検索
                    filteredSkills = item.skills
                        .map((skill, index) => ({ skill, index }))  // スキルとインデックスを保持
                        .filter(item => item.skill.includes(query)); // クエリに一致したスキルのみ
                } else {
                    // クエリが空の場合、すべてのスキルを表示
                    filteredSkills = item.skills.map((skill, index) => ({ skill, index }));
                }

                //スキルカードを生成
                let skillCards = "";
                filteredSkills.forEach(({ skill, index }) => {
                    // 正規表現で全角・半角コロンを検出して分割
                    const [skillName, skillDescription] = skill.split(/：|:/).map(str => str.trim());  // trimで余分なスペースを除去
                    skillCards += `
                        <div class="skill-card">
                            <h4>スキル${index + 1}：${skillName}</h4>
                            <p>${skillDescription}</p>
                        </div>
                    `;
                });

                resultItem.innerHTML = `
                    <h2>${item.name}</h2>
                    <div class="skills">
                        ${skillCards || "<p>該当するスキルが見つかりません。</p>"}
                    </div>
                `;
                resultsDiv.appendChild(resultItem);
            });
        }

        // 検索フォームの送信イベント
        searchForm.addEventListener('submit', function (event) {
            event.preventDefault(); // ページリロードを防止
        
            const query = searchInput.value.trim();
            const selectedCountry = countrySelect.value;
         
            const filteredData = data.filter(item => {
                const isNameMatch = query === "" || item.name.includes(query) || item.reading.includes(query);
                const isSkillMatch = query === "" || item.skills.some(skill => skill.includes(query));
                const isCountryMatch = selectedCountry === "" || item.country === selectedCountry;
                return (isNameMatch || isSkillMatch) && isCountryMatch;
            });
            
            displayResults(filteredData, query, selectedCountry);
        });

        // フィルタ解除ボタンの動作
        resetFiltersButton.addEventListener('click', () => {
            searchInput.value = "";
            countrySelect.value = "";
            searchConditions.textContent = "検索条件が設定されていません。";
            resetFiltersButton.classList.add('hidden');
            resultsDiv.innerHTML = ""; // 結果もリセット
        });
    </script>
</body>
</html>
